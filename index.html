<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="" href="styles.css">
	</head>

	<body>
		<p id='submissionCount'>Loading submission count...</p>
		<form action='https://backend-lu4v.onrender.com/submit', method='POST'>
			<p>Name des Teilnehmenden:</p>
			<input type="text" name="Name" >
			<p>Vorname des Teilnehmenden:</p>
			<input type="text" name="Vorname" >
			<p>E-Mail des Teilnehmenden:</p>
			<input type="text" name="Mail">
			<br><br>
			<button type="submit">Submit</button>
		</form>
	</body>

	<script>
		const backendUrl = 'https://backend-lu4v.onrender.com';
		
		async function fetchSubmissionCount() {
			const res = await fetch(`${backendUrl}/submission-count`);
			const data = await res.json();
			const obj = JSON.parse(data.data);
			const number = obj.length;

			if (number != undefined) {
					document.getElementById("submissionCount").textContent = `Total Submissions: ${number}`;
			} else {
					document.getElementById("submissionCount").textContent = `Total Submissions: 0`;
			}
		}

		fetchSubmissionCount();
	</script>
</html>
